<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Conditional Inference · Omega.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Omega.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../basictutorial/">Basic Tutorial</a></li><li><a class="tocitem" href="../model/">Modeling</a></li><li><a class="tocitem" href="../conditionalindependence/">(Conditional) Independence</a></li><li class="is-active"><a class="tocitem" href>Conditional Inference</a><ul class="internal"><li><a class="tocitem" href="#Conditional-Sampling-Algorithms"><span>Conditional Sampling Algorithms</span></a></li><li><a class="tocitem" href="#Conditioning-with-cond"><span>Conditioning with <code>cond</code></span></a></li><li><a class="tocitem" href="#Conditioning-the-Prior"><span>Conditioning the Prior</span></a></li><li><a class="tocitem" href="#Conditions-Propagate"><span>Conditions Propagate</span></a></li></ul></li><li><a class="tocitem" href="../soft/">Soft Execution</a></li><li><span class="tocitem">Inference Algorithms</span><ul><li><a class="tocitem" href="../inferencealgorithms/">Sampling Algorithms</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li></ul></li><li><span class="tocitem">Causal Inference</span><ul><li><a class="tocitem" href="../causal/">Causal Inference</a></li><li><a class="tocitem" href="../basiccausal/">Tutorial</a></li><li><a class="tocitem" href="../correspondence/">Preservation</a></li></ul></li><li><a class="tocitem" href="../higher/">Distributional Inference</a></li><li><a class="tocitem" href="../distributions/">Built-in Distributions</a></li><li><a class="tocitem" href="../cheatsheet/">Cheat Sheet</a></li><li><a class="tocitem" href="../faq/">FAQ</a></li><li><a class="tocitem" href="../performance/">Performance Tips</a></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../internalsoverview/">Overview</a></li><li><a class="tocitem" href="../omega/">Ω</a></li><li><a class="tocitem" href="../randvar/">RandVar</a></li></ul></li><li><a class="tocitem" href="../contrib/">Contribution Guide</a></li><li><a class="tocitem" href="../omegavsotherppls/">Omega vs other PPLs</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Conditional Inference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Conditional Inference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/zenna/Omega.jl/blob/master/docs/src/inference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Inference"><a class="docs-heading-anchor" href="#Inference">Inference</a><a id="Inference-1"></a><a class="docs-heading-anchor-permalink" href="#Inference" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><strong>TLDR</strong>: <code>rand(x, y, n; alg = alg)</code> draws <code>n</code> samples from <code>x</code> (any <code>RandVar</code>) conditioned on <code>y</code> (any <code>RandVar</code> whose elementype is Bool) and <code>alg</code> is the inference procedure. ```</p></div></div><p>The primary purpose of building a probabilistic model is to use it for inference. The kind of inference we shall describe is called posterior inference, Bayesian inference, conditional inference or simply probabilistic inference.</p><h2 id="Conditional-Sampling-Algorithms"><a class="docs-heading-anchor" href="#Conditional-Sampling-Algorithms">Conditional Sampling Algorithms</a><a id="Conditional-Sampling-Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Conditional-Sampling-Algorithms" title="Permalink"></a></h2><p>While there are several kinds of thing you might like to know about a conditional distribution (such as its mode), currently, all inference algorithms perform conditional sampling only. To sample from a conditional distribution: pass two random variables to <code>rand</code>, the distribution you want to sample from, and the predicate you want to condition on. For example:</p><pre><code class="language-julia hljs">weight = β(2.0, 2.0)
x = bernoulli(weight)
rand(weight, x ==ᵣ 0; alg=RejectionSample)</code></pre><p>It is fine to condition random variables on equalities or inequalities:</p><pre><code class="language-julia hljs">x1 = normal(0.0, 1.0)
rand(x1, x1 &gt; 0.0; alg=RejectionSample)</code></pre><p>It&#39;s also fine to condition on functions of multiple variables</p><pre><code class="language-julia hljs">x1 = normal(0.0, 1.0)
x2 = normal(0.0, 10)
rand((x1, x2), x1 &gt; x2; alg=RejectionSample)</code></pre><p>Note: to sample from more than one random variable, just pass a tuple of <code>RandVar</code>s to <code>rand</code>.</p><h2 id="Conditioning-with-cond"><a class="docs-heading-anchor" href="#Conditioning-with-cond">Conditioning with <code>cond</code></a><a id="Conditioning-with-cond-1"></a><a class="docs-heading-anchor-permalink" href="#Conditioning-with-cond" title="Permalink"></a></h2><p><code>rand(x, y)</code> is simply a shorter way of saying <code>rand(cond(x, y))</code>. That is, the primary mechanism for inference in Omega is conditioning random variables using <code>cond</code>.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>cond(::RandVar, ::RandVar)</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Conditioning-the-Prior"><a class="docs-heading-anchor" href="#Conditioning-the-Prior">Conditioning the Prior</a><a id="Conditioning-the-Prior-1"></a><a class="docs-heading-anchor-permalink" href="#Conditioning-the-Prior" title="Permalink"></a></h2><p>In Bayesian inference the term posterior distribution is often used instead of the conditional distribution.  Mathematically they are the same object, but posterior alludes to the fact that it is the distribution after (a posteriori) observing data. The distribution before observing data is often referred to as the prior.</p><p>However, conditioning is a more general concept than observing data, and we can meaningfully &quot;condition the prior&quot;.</p><p>For example we can truncate a normal distribution through conditioning:</p><pre><code class="language-julia hljs">x = normal(0.0, 1.0)
x_ = cond(x, x &gt; 0.0)</code></pre><p>A shorter way to write this is to pass a unary function as the second argument to <code>cond</code></p><pre><code class="language-julia hljs">x = cond(normal(0.0, 1.0), rv -&gt; rv &gt; 0.0)</code></pre><p>Or suppose we want a poisson distribution over the even numbers</p><pre><code class="language-julia hljs">julia&gt; x = cond(poisson(3.0), iseven)
julia&gt; rand(x, 5; alg = RejectionSample)
5-element Array{Int64,1}:
 2
 6
 2
 4
 0</code></pre><h2 id="Conditions-Propagate"><a class="docs-heading-anchor" href="#Conditions-Propagate">Conditions Propagate</a><a id="Conditions-Propagate-1"></a><a class="docs-heading-anchor-permalink" href="#Conditions-Propagate" title="Permalink"></a></h2><p>When you compose conditoned random variables together, their conditions propagate.  That is, if <code>θ</code> is conditioned, and <code>x</code> depends on <code>θ</code>, then <code>x</code> inherits all the conditions of <code>θ</code> automatically.  For example:</p><pre><code class="language-julia hljs">ispos(x) = x &gt; 0.0
weight = cond(normal(72, 1.0), ispos)
height = cond(normal(1.78, 1.0), ispos)
bmi = weight ./ height</code></pre><p><code>bmi</code> is a function of both <code>weight</code> and <code>height</code>, both of which have their own conditions (namely, they are positive). Omega automatically propagates the conditions from <code>weight</code> and <code>height</code> onto <code>bmi</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../conditionalindependence/">« (Conditional) Independence</a><a class="docs-footer-nextpage" href="../soft/">Soft Execution »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Wednesday 6 April 2022 02:27">Wednesday 6 April 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
